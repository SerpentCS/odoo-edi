<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_edi_message_tree_wi_inherited" model="ir.ui.view"> 
    <field name="name">view.edi.message.tree.wi.inherited</field>
    <field name="model">edi.message</field> 
    <field name="inherit_id" ref="edi_route_ipf.view_edi_message_tree_inherited" /> 
    <field name="arch" type="xml"> 
      <tree position="inside">
        <field name="af_wi_start" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_stop" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_type" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_pnr" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_reqid" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_conid" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
        <field name="af_wi_mailuid" attrs="{'invisible':[('model', '!=', 'edi.ace_workitem')]}"/>
      </tree>
    </field>
  </record> 

  <record id="action_calendar_edi_message_ace" model="ir.actions.act_window">
    <field name="name">ACE messages</field>
    <field name="res_model">edi.message</field>
    <field name="view_mode">tree,form</field>
    <field name="view_id" ref="edi_route.view_edi_message_tree"/>
    <!-- Not a good domain filter but it does the work -->
    <field name="domain">[('af_wi_type', '!=', False)]</field>
  </record>

  <menuitem name="ACE messages" action="action_calendar_edi_message_ace" id="menu_action_calendar_edi_message_ace" parent="calendar_af.menu_admin" sequence="20" groups="af_security.af_meeting_admin" />
</odoo>
